@model IEnumerable<Banking.Domain.Operation>

@{
    ViewBag.Title = "AllOperations";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript">
    $(document).ready(function () {
        assignBehavior('Operation');
    });

    function parseFields(target) {
        var fields = target.find('input[type="text"]');
        var flags = target.find('input[type="checkbox"]');
        var selected = new Array();
        for (i = 0; i < flags.length; i++) {
            if (flags[i].checked == true) {
                selected.push(jQuery(flags[i]).attr('data-id'));
            }
        }
        var query = {
            ID: Number(target.attr('data-id')),
            Date: fields[0].value,
            Amount: fields[1].value,
            Mark: fields[2].value,
            Description: fields[3].value,
            Participants: selected
        }
        return query;
    }

</script>


<table class="tableView tablesorter" id="operations" align="center">

  <caption>
    <p>Deals</p>
    <p class="actionsMenu">
        <input type="button" value="Create new" class="createButton" id="createOperationButton"/>
        <input type="button" value="Delete selected" class="deleteButton" id="deleteOperationButton"/>
    </p>
  </caption>
  <thead>
    <tr id="headings">
        <th scope="col">Start&nbsp;Date&nbsp;</th>
        <th scope="col">Money,$</th>
        <th scope="col">Mark</th>
        <th scope="col">Description</th>
        <th scope="col">Participants</th>
        <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
  @foreach (var op in Model)
  {
    @Html.Partial("ViewOperation", op)
  }
  </tbody>
</table>
